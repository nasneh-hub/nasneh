# S3.8-07: CI Lint Rules Analysis

## ğŸ¯ ÙÙ‡Ù…ÙŠ Ù„Ù„ØªØ§Ø³Ùƒ

### Ø§Ù„Ù‡Ø¯Ù
Ø¥Ù†Ø´Ø§Ø¡ GitHub Actions workflow ÙŠÙØ­Øµ ÙƒÙ„ PR ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆÙŠÙ…Ù†Ø¹ merge Ø¥Ø°Ø§ ÙÙŠÙ‡ Ø§Ù†ØªÙ‡Ø§ÙƒØ§Øª Ù„Ù„Ù€ UI Law.

### Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
`.github/workflows/ui-lint.yml`

### Ø§Ù„Ù€ 8 Checks Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

| # | Check | Severity | Pattern |
|---|-------|----------|---------|
| 1 | Hex colors | âŒ Fail | `#FFFFFF`, `#000` |
| 2 | Tailwind colors | âŒ Fail | `bg-white`, `text-black` |
| 3 | Inline styles | âŒ Fail | `style={{...}}` |
| 4 | Border classes | âŒ Fail | `border-*` |
| 5 | Invalid rounded | âŒ Fail | `rounded-sm/md/lg` (only xl/full allowed) |
| 6 | Forbidden terminology | âŒ Fail | Ø²Ø¨ÙˆÙ†ØŒ Ø¨Ø§Ø¦Ø¹ØŒ customer, vendor |
| 7 | Hardcoded Arabic | âŒ Fail | Any Arabic text not in copy tokens |
| 8 | Hardcoded English | âš ï¸ Warning | Common UI text (Save, Delete, etc.) |

### Scope
- `apps/**/*.{tsx,ts,css}`
- `packages/ui/**/*.{tsx,ts,css}`

### Exceptions
- Forbidden terminology is OK inside `/copy/` or `terminology.ts`

---

## ğŸ¤” Ù‡Ù„ Ù‡Ø°Ø§ ÙƒØ§ÙÙŠ Ù„Ù„Ø­Ù…Ø§ÙŠØ©ØŸ

### âœ… Ù…Ø§ ÙŠØ­Ù…ÙŠÙ‡ (Strong Protection)

#### 1. Law #1: NO BORDERS âœ…
- **Check #4:** ÙŠÙ…Ù†Ø¹ `border-*` classes
- **Ù…Ø«Ø§Ù„:** `border border-gray-300` â†’ âŒ FAIL

#### 2. Law #2: ONLY rounded-xl/full âœ…
- **Check #5:** ÙŠÙ…Ù†Ø¹ `rounded-sm/md/lg`
- **Ù…Ø«Ø§Ù„:** `rounded-md` â†’ âŒ FAIL
- **Ù…Ø«Ø§Ù„:** `rounded-xl` â†’ âœ… PASS

#### 3. Law #3: ONLY MONO COLORS âœ…
- **Check #1:** ÙŠÙ…Ù†Ø¹ hex colors
- **Check #2:** ÙŠÙ…Ù†Ø¹ Tailwind color classes
- **Ù…Ø«Ø§Ù„:** `#FF0000` â†’ âŒ FAIL
- **Ù…Ø«Ø§Ù„:** `bg-blue-500` â†’ âŒ FAIL

#### 4. Law #4: ONLY Vazirmatn Font âš ï¸ (Partial)
- **Ù„Ø§ ÙŠÙˆØ¬Ø¯ check Ù…Ø¨Ø§Ø´Ø±** Ù„Ù„Ù€ `fontFamily`
- **Gap:** ÙŠÙ…ÙƒÙ† Ø£Ø­Ø¯ ÙŠÙƒØªØ¨ `fontFamily: 'Arial'` ÙˆÙ…Ø§ Ø±Ø§Ø­ ÙŠÙ…Ø³ÙƒÙ‡

#### 5. Law #5: ONLY @nasneh/ui Components âš ï¸ (Partial)
- **Ù„Ø§ ÙŠÙˆØ¬Ø¯ check** Ù„Ù„Ù€ component imports
- **Gap:** ÙŠÙ…ÙƒÙ† Ø£Ø­Ø¯ ÙŠØ³ØªÙˆØ±Ø¯ Ù…Ù† Ù…ÙƒØªØ¨Ø© Ø«Ø§Ù†ÙŠØ©

#### 6. Copy Tokens âœ…
- **Check #6:** ÙŠÙ…Ù†Ø¹ forbidden terminology
- **Check #7:** ÙŠÙ…Ù†Ø¹ hardcoded Arabic
- **Check #8:** warning Ù„Ù„Ù€ hardcoded English

#### 7. Inline Styles âœ…
- **Check #3:** ÙŠÙ…Ù†Ø¹ `style={{...}}`

---

## âš ï¸ Gaps & Weaknesses

### Gap #1: Font Family (Law #4)
**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
```tsx
// âŒ Ù‡Ø°Ø§ Ø±Ø§Ø­ ÙŠÙ…Ø± Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„!
<div style={{ fontFamily: 'Arial' }}>Text</div>
```

**Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:**
Ø¥Ø¶Ø§ÙØ© check #9:
```bash
grep -E "fontFamily.*['\"](?!Vazirmatn)" --include="*.tsx" --include="*.ts"
```

---

### Gap #2: Component Imports (Law #5)
**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
```tsx
// âŒ Ù‡Ø°Ø§ Ø±Ø§Ø­ ÙŠÙ…Ø± Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„!
import { Button } from 'react-bootstrap';
import { Input } from 'antd';
```

**Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:**
Ø¥Ø¶Ø§ÙØ© check #10:
```bash
# ÙŠÙ…Ù†Ø¹ imports Ù…Ù† Ù…ÙƒØªØ¨Ø§Øª UI Ø®Ø§Ø±Ø¬ÙŠØ©
grep -E "from ['\"](@mui|antd|react-bootstrap|chakra-ui|mantine)" --include="*.tsx" --include="*.ts"
```

---

### Gap #3: CSS Variables Usage
**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
```tsx
// âŒ Ù‡Ø°Ø§ Ø±Ø§Ø­ ÙŠÙ…Ø± (inline style Ù…Ù…Ù†ÙˆØ¹ Ù„ÙƒÙ† CSS class Ù„Ø§)
.my-custom-class {
  background: #FF0000; /* Ø±Ø§Ø­ ÙŠÙ…Ø³ÙƒÙ‡ */
  height: 48px;        /* Ù…Ø§ Ø±Ø§Ø­ ÙŠÙ…Ø³ÙƒÙ‡ - supposed to use var(--height-md) */
}
```

**Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:**
Ø¥Ø¶Ø§ÙØ© check #11:
```bash
# ÙŠØªØ£ÙƒØ¯ Ø¥Ù† ÙƒÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† tokens.css
grep -E "(height|width|padding|margin|font-size|border-radius):\\s*[0-9]+(px|rem)" --include="*.css"
```

---

### Gap #4: className Prop
**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
```tsx
// âŒ Ù‡Ø°Ø§ Ø±Ø§Ø­ ÙŠÙ…Ø± Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„!
<Button className="my-custom-styles">Click</Button>
```

**Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:**
Ø¥Ø¶Ø§ÙØ© check #12:
```bash
# ÙŠÙ…Ù†Ø¹ className Ø¹Ù„Ù‰ Ù…ÙƒÙˆÙ†Ø§Øª @nasneh/ui
grep -E "<(Button|Input|Card|Badge).*className=" --include="*.tsx"
```

---

### Gap #5: False Positives
**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
```tsx
// âœ… Ù‡Ø°Ø§ ØµØ­ÙŠØ­ Ù„ÙƒÙ† Ø±Ø§Ø­ ÙŠÙØ´Ù„!
const comment = "// Use #FFFFFF for white";
const docs = "Customer support email: support@nasneh.com";
```

**Ø§Ù„Ø­Ù„:**
- Check #1 (hex colors): ignore comments
- Check #6 (terminology): ignore email addresses

---

### Gap #6: Hardcoded Arabic Detection
**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
```tsx
// âŒ ÙƒÙŠÙ Ù†ÙØ±Ù‚ Ø¨ÙŠÙ† Ù‡Ø°Ø§:
const title = "Ù…Ø±Ø­Ø¨Ø§Ù‹";  // âŒ Hardcoded

// ÙˆÙ‡Ø°Ø§:
const title = ar.ui.welcome;  // âœ… From tokens
```

**Ø§Ù„Ø­Ù„:**
Check #7 ÙŠØ­ØªØ§Ø¬ ÙŠÙƒÙˆÙ† Ø£Ø°ÙƒÙ‰:
```bash
# ÙŠÙ…Ù†Ø¹ Arabic text Ø¥Ù„Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†:
# 1. Ø¯Ø§Ø®Ù„ ar.* Ø£Ùˆ en.*
# 2. Ø¯Ø§Ø®Ù„ /copy/ folder
# 3. Ø¯Ø§Ø®Ù„ comments
```

---

## ğŸ“Š Protection Coverage

| Law | Check | Coverage | Gap |
|-----|-------|----------|-----|
| **Law #1: NO BORDERS** | âœ… Check #4 | 95% | CSS-in-JS libraries |
| **Law #2: ONLY rounded-xl** | âœ… Check #5 | 90% | Custom CSS files |
| **Law #3: ONLY MONO COLORS** | âœ… Check #1, #2 | 85% | RGB/HSL colors |
| **Law #4: ONLY Vazirmatn** | âŒ Missing | 0% | **CRITICAL GAP** |
| **Law #5: ONLY @nasneh/ui** | âŒ Missing | 0% | **CRITICAL GAP** |
| **Copy Tokens** | âœ… Check #6, #7, #8 | 70% | Smart detection needed |
| **Inline Styles** | âœ… Check #3 | 95% | CSS-in-JS |

**Overall Coverage:** ~60%

---

## ğŸ”§ Recommended Additional Checks

### Check #9: Font Family Enforcement
```yaml
- name: 'Law 4: Check for Non-Vazirmatn Fonts'
  run: |
    if grep -r -E "fontFamily.*['\"](?!Vazirmatn|var\(--font)" \
      --include="*.tsx" --include="*.ts" --include="*.css" \
      apps/ packages/ui/; then
      echo "âŒ VIOLATION: Only Vazirmatn font allowed"
      exit 1
    fi
```

### Check #10: External UI Library Imports
```yaml
- name: 'Law 5: Check for External UI Libraries'
  run: |
    if grep -r -E "from ['\"](@mui|antd|react-bootstrap|chakra-ui|mantine|shadcn)" \
      --include="*.tsx" --include="*.ts" \
      apps/ packages/ui/; then
      echo "âŒ VIOLATION: Only @nasneh/ui components allowed"
      exit 1
    fi
```

### Check #11: CSS Token Usage
```yaml
- name: 'Design System: Check for Hardcoded CSS Values'
  run: |
    if grep -r -E "(height|padding|font-size|border-radius):\\s*[0-9]+(px|rem)" \
      --include="*.css" \
      apps/ packages/ui/ \
      | grep -v "tokens.css"; then
      echo "âš ï¸ WARNING: Use CSS variables from tokens.css"
      # Warning only, not fail
    fi
```

### Check #12: className Prop on UI Components
```yaml
- name: 'Law 5: Check for className on @nasneh/ui Components'
  run: |
    if grep -r -E "<(Button|Input|Card|Badge|Dialog|Table|Select|Tabs|Avatar|Toast|Skeleton).*className=" \
      --include="*.tsx" \
      apps/ packages/ui/; then
      echo "âŒ VIOLATION: className prop not allowed on @nasneh/ui components"
      exit 1
    fi
```

---

## âœ… Final Recommendation

### Ø§Ù„Ù€ 8 Checks Ø§Ù„Ø£ØµÙ„ÙŠØ©
**ÙƒØ§ÙÙŠØ© Ù„Ù€:** 60% protection

### Ù…Ø¹ Ø§Ù„Ù€ 4 Checks Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
**ÙƒØ§ÙÙŠØ© Ù„Ù€:** 85% protection

### Ù…Ø§ ÙŠØ¨Ù‚Ù‰ (15%)
- CSS-in-JS libraries (styled-components, emotion)
- RGB/HSL colors
- Complex inline styles
- Dynamic className generation

---

## ğŸ¯ Ø®Ù„Ø§ØµØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©

**Ù‡Ù„ Ø§Ù„Ù€ 8 checks ÙƒØ§ÙÙŠØ©ØŸ**
âŒ **Ù„Ø§ØŒ ÙÙŠÙ‡Ø§ gaps Ø®Ø·ÙŠØ±Ø©:**

1. **Law #4 (Vazirmatn):** Ù…Ø§ ÙÙŠÙ‡ check Ø£Ø¨Ø¯Ø§Ù‹
2. **Law #5 (@nasneh/ui):** Ù…Ø§ ÙÙŠÙ‡ check Ø£Ø¨Ø¯Ø§Ù‹
3. **className prop:** Ù…Ø§ ÙÙŠÙ‡ check

**ØªÙˆØµÙŠØªÙŠ:**
âœ… Ù†Ø¶ÙŠÙ Ø§Ù„Ù€ 4 checks Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© (#9-#12)
âœ… Ù†Ø­Ø³Ù‘Ù† Check #7 (hardcoded Arabic detection)
âœ… Ù†Ø¶ÙŠÙ exceptions Ù„Ù„Ù€ false positives

**Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª:**
âœ… 85% protection
âœ… ÙŠØºØ·ÙŠ ÙƒÙ„ Ø§Ù„Ù€ 5 laws
âœ… ÙŠÙ…Ù†Ø¹ Ø£ØºÙ„Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§ÙƒØ§Øª

**Ø§Ù„Ù€ 15% Ø§Ù„Ø¨Ø§Ù‚ÙŠØ©:**
- ØªØ­ØªØ§Ø¬ ESLint plugin Ù…Ø®ØµØµ
- Ø£Ùˆ TypeScript compiler plugin
- Ù„ÙƒÙ† Ù‡Ø°Ø§ overkill Ù„Ù„Ù€ MVP
